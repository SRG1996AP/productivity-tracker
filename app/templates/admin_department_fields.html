{% extends "base.html" %}

{% block content %}
<div style="max-width: 1200px; margin: 0 auto; padding: 20px;">
    <h1>{{ department.name }} - Tracking Fields Configuration</h1>
    
    <div style="margin: 20px 0;">
        <a href="{{ url_for('main.admin_users') }}" class="btn btn-secondary" style="display: inline-block; padding: 10px 20px; background-color: #6c757d; color: white; text-decoration: none; border-radius: 4px; margin-right: 10px;">Back to Admin</a>
        <a href="{{ url_for('main.admin_add_field', dept_id=department.id) }}" class="btn btn-primary" style="display: inline-block; padding: 10px 20px; background-color: #667eea; color: white; text-decoration: none; border-radius: 4px;">Add New Field</a>
    </div>
    
    {% if fields %}
    <div style="background: white; border: 1px solid #ddd; border-radius: 8px; padding: 20px; margin: 20px 0;">
        <h2 style="margin-top: 0; border-bottom: 2px solid #667eea; padding-bottom: 10px;">Configured Fields</h2>
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background-color: #f8f9fa;">
                    <th style="padding: 12px; text-align: left; font-weight: 600; border-bottom: 2px solid #ddd;">Order</th>
                    <th style="padding: 12px; text-align: left; font-weight: 600; border-bottom: 2px solid #ddd;">Field Label</th>
                    <th style="padding: 12px; text-align: left; font-weight: 600; border-bottom: 2px solid #ddd;">Field Name</th>
                    <th style="padding: 12px; text-align: left; font-weight: 600; border-bottom: 2px solid #ddd;">Type</th>
                    <th style="padding: 12px; text-align: left; font-weight: 600; border-bottom: 2px solid #ddd;">Required</th>
                    <th style="padding: 12px; text-align: left; font-weight: 600; border-bottom: 2px solid #ddd;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for field in fields %}
                <tr style="border-bottom: 1px solid #ddd;">
                    <td style="padding: 12px;">{{ field.order }}</td>
                    <td style="padding: 12px;">{{ field.field_label }}</td>
                    <td style="padding: 12px; color: #667eea; font-family: monospace;">{{ field.field_name }}</td>
                    <td style="padding: 12px;">
                        <span style="display: inline-block; background-color: #e9ecef; padding: 4px 8px; border-radius: 4px; font-size: 12px;">{{ field.field_type }}</span>
                    </td>
                    <td style="padding: 12px;">
                        {% if field.is_required %}
                        <span style="color: #28a745; font-weight: bold;">âœ“ Yes</span>
                        {% else %}
                        <span style="color: #6c757d;">Optional</span>
                        {% endif %}
                    </td>
                    <td style="padding: 12px;">
                        <a href="{{ url_for('main.admin_edit_field', field_id=field.id) }}" style="color: #667eea; text-decoration: none; margin-right: 10px;">Edit</a>
                        <form method="POST" action="{{ url_for('main.admin_delete_field', field_id=field.id) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this field?');">
                            <button type="submit" style="background: none; border: none; color: #dc3545; cursor: pointer; text-decoration: underline; padding: 0;">Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div style="background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 4px; padding: 15px; margin: 20px 0; color: #721c24;">
        <p style="margin: 0;">No tracking fields configured yet. <a href="{{ url_for('main.admin_add_field', dept_id=department.id) }}" style="color: #721c24; text-decoration: underline; font-weight: bold;">Add the first field</a></p>
    </div>
    {% endif %}
    
    <div style="background: #d1ecf1; border: 1px solid #bee5eb; border-radius: 4px; padding: 15px; margin: 20px 0; color: #0c5460; font-size: 14px;">
        <p style="margin: 0;">
            <strong>Tip:</strong> Custom fields will appear in the activity entry form for {{ department.name }} department. 
            Users will be able to fill in these fields when logging activities.
        </p>
    </div>
</div>
{% endblock %}
